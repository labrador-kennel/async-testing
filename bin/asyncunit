#!/usr/bin/php
<?php

namespace Cspray\Labrador\AsyncUnit;

$cwd = getcwd();

require_once $cwd . '/vendor/autoload.php';

use Cspray\Labrador\AsyncUnitCli\AsyncUnitConsoleApplication;
use Labrador\AsyncEvent\AmpEventEmitter;
use Psr\Log\NullLogger;
use function Amp\ByteStream\getStdout;
use function Amp\File\filesystem;

$logger = new NullLogger();
$configurationFactory = new JsonConfigurationFactory();

$application = new AsyncUnitConsoleApplication(
    $logger,
    new AmpEventEmitter(),
    filesystem(),
    $configurationFactory,
    getStdout(),
    $cwd . '/async-unit.json'
);

$application->run();
